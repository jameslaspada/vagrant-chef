{
  "name": "nexus",
  "description": "Installs/Configures nexus",
  "long_description": "Description\n===========\n\nInstalls and configures Sonatype Nexus. Can optionally configure and install an nginx installation or provide\nSSL access to the Jetty server that runs Nexus.\n\nRequirements\n============\n\nPlatform: \n\n* Ubuntu\n* CentOS\n\nThe following cookbooks are dependencies:\n\n* java\n* nginx\n* artifact\n\nRecipes\n=======\n\n* default - the recipe you want in your run-list. Configures a system and installs a Nexus server.\n* app - the core recipe used for installing the Nexus server.\n* nginx - add this recipe to your run-list when you want nginx installed and configured to proxy the Nexus server.\n* cli - installs packages at compilation time and uses `chef_gem` to instal the nexus_cli gem. Primarily used by the LWRPs of this cookbook.\n\n\nUsage\n=====\n\nSimply add the `nexus::default` recipe to the node where you want Sonatype Nexus installed.\n\nDue to a recent change on Sonatypes website, the downloads got a bit weird. Each time you download a tar.gz from Sonatype's site, it has two version\nnumbers. One that is an internal folder inside the tar (ex: 2.3.1-01) and one that they use on their website's downloads page (ex: 2.3, latest). I have\nrecently added a new attribute to reflect this change - `node.nexus.version` will be used to reflect the inner version, and `node.nexus.external_version`\nwill be used to reflect the version in the downloads URL.\n\nData Bags\n=========\n\nAs of version 2.0.0, this cookbook now uses fewer, more standardized Encrypted Data Bags. Following the style used \nat Riot, Data bags are created per Chef Environment and default to a data bag item named \"_wildcard\" if there is no environmental\ndata bag item. \n\nFor version 2.0.0, the data bag has been revised to only include the credentials, and license elements.\n\nBelow is how you should create your data bags for using this cookbook:\n    \n    knife data bag create nexus _wildcard -c your/chef/config --secret-file your/encrypted_data_bag_key\n\n    {\n      \"id\": \"_wildcard\",\n      \"credentials\": {\n        \"default_admin\": {\n          \"username\": \"admin\",\n          \"password\": \"admin123\"\n        },\n        \"updated_admin\": {\n          \"username\": \"admin\",\n          \"password\": \"new_password\"\n        },\n      },\n      \"license\": {\n        \"file\": \"base64d license file\"\n      }\n    }\n\nWhen you want to configure the Nexus to be served via SSL, you will need to set the nexus.app\\_server\\_proxy.ssl.enabled attribtue and configure an\nencrypted data bag.\n\nYour data bag items should look like the following:\n\n    knife data bag create nexus_ssl_files _wildcard -c your/chef/config --secret-file your/encrypted_data_bag_key\n\n    {\n      \"id\": \"_wildcard\",\n      \"fully-qualified-domain-name\": {\n        \"crt\": \"base64-encoded-ssl-certificate\",\n        \"key\": \"base64-encoded-private-key\"\n      }\n    }\n\nResources/Providers\n===================\n\n## nexus\\_plugin\n\nInstalls a Nexus plugin by creating a symlink of a named plugin from the Nexus' `optional-plugins` directory into the\nNexus' `plugin-repositroy` directory.\n\n### Actions\nAction  | Description         | Default\n------- |-------------        |---------\ninstall | Installs the plugin | Yes\n\n### Attributes\nAttribute  | Description                   | Type    | Default\n---------  |-------------                  |-----    |--------\nname       | Name of the plugin to install | String  | name\n\n## nexus\\_repository\n\nResource provider for creating and deleting Neuxs repositories.\n\n### Actions\nAction  | Description              | Default\n------- |-------------             |---------\ncreate  | Creates a new repository | Yes\ndelete  | Deletes a repository     |\nupdate  | Updates a repository     | \n\n### Attributes\nAttribute        | Description                                                         | Type                  | Default\n---------        |-------------                                                        |-----                  |--------\nname             | Name of the repository to create/delete                             | String                | name\ntype             | The type of repository - either \"hosted\" or \"proxy\".                | String                |\nurl              | The url used for a proxy repository.                                | String                |\npolicy           | Either \"HOSTED\" or \"SNAPSHOT\" repository policy for artifacts       | String                |\npublisher        | Whether this repository is a publisher of artifacts.                | TrueClass, FalseClass |\nsubscriber       | Whether this repository is a subscriber to artifacts.               | TrueClass, FalseClass |\npreemptive_fetch | Whether this (proxy) repository should preemptively fetch artifacts | TrueClass, FalseClass |\n\n## nexus\\_settings\n\nResource provider for modifying the global Nexus settings.\n\n### Actions\nAction  | Description                          | Default\n------- |-------------                         |---------\nupdate  | Updates a global Nexus setting to a new value. | Yes\n\n### Attributes\nAttribute  | Description                                  | Type                          | Default\n---------  |-------------                                 |-----                          |--------\npath       | The element of the settings that is going to be changed. | String                        | name\nvalue      | The new value to update the path to.                     | String, TrueClass, FalseClass |\n\n## nexus\\_user\n\nResource provider for creating, deleting, and modifying Nexus user accounts.\n\n### Actions\nAction          | Description                                    | Default\n-------         |-------------                                   |---------\ncreate          | Creates a new Nexus user.                      | Yes\ndelete          | Deletes a Nexus user.                          | \nupdate          | Updates a Nexus user with updated information  |\nchange_password | Changes a Nexus user's password                |\n\n### Attributes\nAttribute    | Description                                              | Type                  | Default\n---------    |-------------                                             |-----                  |--------\nusername     | The element of the settings that is going to be changed. | String                | name\nfirst_name   | The first name of the user.                              | String                |\nlast_name    | The last name of the user.                               | String                |\nemail        | The email address of the user.                           | String                |\nenabled      | Whether or not this user is enabled or disabled.         | TrueClass, FalseClass |\npassword     | The current (or new) password of the user.               | String                |\nold_password | The old password of the user, used in change_password.   | String                |\nroles        | A list of roles (permissions) to apply to the user.      | Array                 |\n\n## nexus\\_license\n\nResource provider for installing a license file into Nexus. \n\n### Actions\nAction   | Description                                       | Default\n-------  |-------------                                      |---------\ninstall  | Installs a license file into the server.          | Yes\n\n### Attributes\nAttribute  | Description                                                       | Type                          | Default\n---------  |-------------                                                      |-----                          |--------\nname       | Some useful information about the license. Similar to ruby_block. | String                        | name\n\n## nexus\\_proxy\n\nResource provider for manipulating the Nexus' settings for Smart Proxy.\n\n### Actions\nAction              | Description                                    | Default\n-------             |-------------                                   |---------\nenable              | Enables the Smart Proxy functionality.         | Yes\ndisable             | Disables the Smart Proxy functionality.        | \nadd_trusted_key     | Adds a trusted key to the server.              | \ndelete_trusted_key  | Removes a trusted key from the server.         | \n\n\n### Attributes\nAttribute    | Description                                                                    | Type                  | Default\n---------    |-------------                                                                   |-----                  |--------\nname         | Some useful information about the proxy. Similar to ruby_block.                | String                | name\nid           | Used for delete_trusted_key. The id of the key to delete.                      | String                |\nhost         | The host to use for Smart Proxy. Used for enable.                              | String                |\nport         | The port to use for Smart Proxy. Used for enable.                              | Fixnum                |\ncertificate  | The certificate of another Nexus to add. Used for add_trusted_key.             | String                |\ndescription  | The description of the other Nexus. Used for add_trusted_key.                  | String                |\n\n\nAttributes\n==========\n\nMost attributes under nexus are basic attributes needed for correctly installing the server. You can define things like the url to download the Nexus zip from, the install location, and other similar things here.\n\n* nexus.version - sets the version inside the nexus package\n* nexus.base_dir - sets the base directory under which to place the nexus user's home directory.\n* nexus.user - sets the user to install nexus under\n* nexus.group - sets the group to install nexus under\n* nexus.external_version - the version used on the downloads page for nexus\n* nexus.url - sets the URL where the nexus package is located\n* nexus.checksum - The SHA256 checksum of the Nexus installation package\n* nexus.port - the port to run nexus on\n* nexus.host - the hostname to use for nexus\n* nexus.context_path - the context path under which Nexus is running under. ie. \"/nexus\" #=> \"http://localhost:8081/nexus\"\n* nexus.name - the name of the Nexus\n* nexus.bundle_name - the name of the internal folder of the Nexus tar. Usually nexus-{professional or nothing}-{VERSION}\n* nexus.home - the installation directory for the nexus application. Uses name.\n* nexus.current_path - the above home/current/bundle_name. The artifact_deploy resource uses the `current` symlink to denote the currently installed version.\n* nexus.pid_dir - the pid directory defined in the nexus.erb template. Saves a pid in the `pids` directory created by the artifact_deploy resource.\n* nexus.conf_dir - the above home/conf\n* nexus.bin_dir - the above home/bin\n* nexus.work_dir - the above path/sonatype-work/nexus\n* nexus.plugins - an Array of Nexus plugins that will be installed by the default recipe.\n* nexus.logs.logs\\_to\\_keep - a fixnum value for the maximum number of logs the Nexus should keep.\n\nAttributes under app\\_server\\_proxy help when you want to install an proxy in front of the running Nexus Jetty container. At the moment, the only supported alternative is nginx. Also, here is where you can configure SSL for either nginx or Jetty.\n\n* nexus.app\\_server\\_proxy.nginx.server_name - the name to be configured in the nginx.conf server element.\n* nexus.app\\_server.jetty.loopback - true if you want to loop back on the default port (useful if you want to disable HTTP access).\n* nexus.app\\_server\\_proxy.ssl.setup - set this attribute when you want SSL configured. Valid values are :none, :nginx, or :jetty.\n* nexus.app\\_server\\_proxy.use_self_signed - defaults to false, set to true to use the pre-packaged, self signed certificate.\n* nexus.app\\_server\\_proxy.ssl.port - the port to use for SSL connections.\n* nexus.app\\_server\\_proxy.ssl.key - defines where to look in the credentials data bag for the SSL certificate and key information.\n* nexus.app\\_server\\_proxy.nginx.server.options - used to generate options in the `server` section of the nginx conf file.\n* nexus.app\\_server\\_proxy.nginx.proxy.options - used to generate proxy options in the `location` section of the nginx conf file.\n\nAttributes under cli are used for configuring how the nexus_cli should behave. Most LWRPs in this cookboo use the nexus_cli gem for configuring a running Nexus server. Here you can configure how many attempts the gem should make before raising an exception about the Nexus server not being reachable (useful when you start or restart the server).\n\n* nexus.cli.ssl.verify - true if we want to verify SSL connections. false if you have bad SSL certificates on your servers. If you are testing local nginx and SSL, you'll want this value to be false, because the certificate is self-signed.\n* nexus.cli.repository - The repository that nexus_cli gem will use for push / pull operations. A requirement of nexus_cli, not used by this cookbook.\n* nexus.cli.default\\_admin\\_credentials\\_updated - this attribute is used for setting chosing what credentials the nexus_cli will use. This attribute will be set on the node after the nexus\\_user resource changes the Nexus server's password.\n* nexus.cli.retries - the number of attempts to make when connecting to a Nexus server. Most LWRPs in this cookbook require the Nexus server to be running.\n* nexus.cli.retry\\_delay - the time to wait in between attempts to connect to the Nexus server.\n\nLocal Development\n=================\n\nIn order to run this cookbook locally in Vagrant, you need to configure data bags in `~/.chef/data_bags` and place your encrypted data bag secret key in `~/.chef/encrypted_data_bag_secret`.\n\nLicense and Author\n==================\n\nAuthor:: Kyle Allan (<kallan@riotgames.com>)\nBased on work by Joseph Holsten (<joseph@josephholsten.com>), Charles Scott (<connaryscott@gmail.com>),\nGreg Schueler (<greg.schueler@gmail.com>), and Seth Chisamore (<schisamo@opscode.com>)\n\nCopyright 2014, Riot Games\n\nLicensed under the Apache License, Version 2.0 (the \"License\");\nyou may not use this file except in compliance with the License.\nYou may obtain a copy of the License at\n\n    http://www.apache.org/licenses/LICENSE-2.0\n\nUnless required by applicable law or agreed to in writing, software\ndistributed under the License is distributed on an \"AS IS\" BASIS,\nWITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\nSee the License for the specific language governing permissions and\nlimitations under the License.\n",
  "maintainer": "Riot Games",
  "maintainer_email": "kallan@riotgames.com",
  "license": "Apache 2.0",
  "platforms": {
    "ubuntu": ">= 0.0.0",
    "centos": ">= 0.0.0"
  },
  "dependencies": {
    "java": ">= 1.15.4",
    "nginx": ">= 1.8.0",
    "artifact": ">= 1.11.0"
  },
  "recommendations": {
  },
  "suggestions": {
  },
  "conflicting": {
  },
  "providing": {
  },
  "replacing": {
  },
  "attributes": {
  },
  "groupings": {
  },
  "recipes": {
  },
  "version": "3.3.0"
}